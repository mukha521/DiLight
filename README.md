# DiLight

###### Простой светильник с плавным включением и выключением света с датчиком расстояния vl53l0x от ST на базе STM32G030

[Код main()](/firmware/Core/Src/main.c)

При долгом удержании пальца на тач-кнопке, включается режим конфигурирования.
Нужно встать на расстоянии, где светильник будет включаться и тапнуть по кнопке.
Затем встать на расстоянии, где светильник будет отключаться и тапнуть по кнопке.
Конфигурация хранится на последней странице флеш-памяти контроллера.


[Схема rev.2.0](/kicad/rev.2.0/DiLight_2.0.pdf)

История:

rev.2.0:
- Уменьшен размер платы
- Использован менее мощный MOSFET в корпусе SOT-23
- Убраны ограничивающие резисторы с разъемов
- Убрана разводка UART на разъем программирования
- Только один терминал для подключения ленты
- Плата с корпусом теперь надевается на профиль для ленты. Не нужно разрезать профиль.

rev.1.1
- винтовой терминал вместо "бочко-разъема" для шнура питания
- MOSFET вместо диода в качестве защиты от обратной полярности питания

Рендер платы:
rev.2.0:
![PCB1 rev.2.0](/renders/PCB1_2.0.png)
![PCB2 rev.2.0](/renders/PCB2_2.0.png)

rev.1.1:
![PCB1 rev.1.1](/renders/PCB1_1.1.png)
![PCB2 rev.1.1](/renders/PCB2_1.1.png)

Рендер:
![render1](/renders/DiLight_2022-Aug-26_03-22-06PM-000_CustomizedView20665969842.png)
![render2](/renders/DiLight_2022-Aug-26_02-45-06PM-000_CustomizedView16817278455.png)
![render2](/renders/DiLight_2022-Aug-26_02-08-49PM-000_CustomizedView16817278455.png)

Промежуточные фото платы (флюс не отмыт :) )
![Photo1](/renders/01.jpg)
![Photo2](/renders/02.jpg)
